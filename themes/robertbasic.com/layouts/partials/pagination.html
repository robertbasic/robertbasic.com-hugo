{{ $cp := .Paginator.PageNumber }}
{{ if lt $cp 4 }}
    {{ $.Scratch.Set "p" (first 5 .Paginator.Pagers) }}
{{ else if gt $cp (sub .Paginator.TotalPages 2) }}
    {{ $.Scratch.Set "p" (last 5 .Paginator.Pagers) }}
{{ else }}
    {{ $.Scratch.Set "p" (first 5 (after (sub $cp 3) .Paginator.Pagers)) }}
{{ end }}
<div class="navigation">
    {{ if .Paginator.HasPrev }}
        <a href="{{ .Paginator.First.URL }}"> &laquo; </a>
        <a href="{{ .Paginator.Prev.URL }}"> &lsaquo; </a>
    {{ end }}

    {{ range $.Scratch.Get "p" }}
        <a href="{{ .URL }}" {{ if eq $cp .PageNumber }}class="current"{{ end }}> {{ .PageNumber }} </a>
    {{ end }}

    {{ if .Paginator.HasNext }}
        <a href="{{ .Paginator.Next.URL }}"> &rsaquo; </a>
        <a href="{{ .Paginator.Last.URL }}"> &raquo; </a>
    {{ end }}
</div>
